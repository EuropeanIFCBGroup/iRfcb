<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Annotate IFCB Images with Specified Class — ifcb_annotate_batch • iRfcb</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Annotate IFCB Images with Specified Class — ifcb_annotate_batch"><meta name="description" content="This function creates or updates manual .mat classlist files with a user specified class in batch,
based on input vector of IFCB image names.
These .mat can be used with the code in the ifcb-analysis repository (Sosik and Olson 2007)."><meta property="og:description" content="This function creates or updates manual .mat classlist files with a user specified class in batch,
based on input vector of IFCB image names.
These .mat can be used with the code in the ifcb-analysis repository (Sosik and Olson 2007)."><meta property="og:image" content="https://europeanifcbgroup.github.io/iRfcb/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iRfcb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tutorial.html">Tutorial</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Annotate IFCB Images with Specified Class</h1>

      <div class="d-none name"><code>ifcb_annotate_batch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates or updates manual <code>.mat</code> classlist files with a user specified class in batch,
based on input vector of IFCB image names.
These <code>.mat</code> can be used with the code in the <code>ifcb-analysis</code> repository (Sosik and Olson 2007).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ifcb_annotate_batch</span><span class="op">(</span></span>
<span>  <span class="va">png_images</span>,</span>
<span>  <span class="va">class</span>,</span>
<span>  <span class="va">manual_folder</span>,</span>
<span>  <span class="va">adc_folder</span>,</span>
<span>  <span class="va">class2use_file</span>,</span>
<span>  manual_output <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  manual_recursive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  unclassified_id <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-png-images">png_images<a class="anchor" aria-label="anchor" href="#arg-png-images"></a></dt>
<dd><p>A character vector containing the names of the PNG images to be annotated in the format DYYYYMMDDTHHMMSS_IFCBXXX_ZZZZZ.png, where XXX represent the IFCB number and ZZZZZ the roi number.</p></dd>


<dt id="arg-class">class<a class="anchor" aria-label="anchor" href="#arg-class"></a></dt>
<dd><p>A character string or integer specifying the class name or class2use index to annotate the images with. If a string is provided, it is matched against the available classes in <code>class2use_file</code>.</p></dd>


<dt id="arg-manual-folder">manual_folder<a class="anchor" aria-label="anchor" href="#arg-manual-folder"></a></dt>
<dd><p>A character string specifying the path to the folder containing the manual <code>.mat</code> classlist files.</p></dd>


<dt id="arg-adc-folder">adc_folder<a class="anchor" aria-label="anchor" href="#arg-adc-folder"></a></dt>
<dd><p>A character string specifying the path to the base folder containing the raw data, organized in subfolders by year (YYYY) and date (DYYYYMMDD). Each subfolder contains ADC files, which are used to determine the number of regions of interest (ROIs) for each sample when creating new manual <code>.mat</code> files.</p></dd>


<dt id="arg-class-use-file">class2use_file<a class="anchor" aria-label="anchor" href="#arg-class-use-file"></a></dt>
<dd><p>A character string specifying the path to the <code>.mat</code> file containing class names and corresponding indices.</p></dd>


<dt id="arg-manual-output">manual_output<a class="anchor" aria-label="anchor" href="#arg-manual-output"></a></dt>
<dd><p>A character string specifying the path to the folder where updated or newly created <code>.mat</code> classlist files will be saved. If not provided, the <code>manual_folder</code> path will be used by default.</p></dd>


<dt id="arg-manual-recursive">manual_recursive<a class="anchor" aria-label="anchor" href="#arg-manual-recursive"></a></dt>
<dd><p>A logical value indicating whether to search recursively within <code>manual_folder</code> for <code>.mat</code> files. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-unclassified-id">unclassified_id<a class="anchor" aria-label="anchor" href="#arg-unclassified-id"></a></dt>
<dd><p>An integer specifying the class ID to use for unclassified regions of interest (ROIs) when creating new manual <code>.mat</code> files. Default is <code>1</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function does not return a value. It creates or updates <code>.mat</code> files in the <code>manual_folder</code> to
reflect the specified annotations.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function requires a python interpreter to be installed. The required python packages can be installed in a virtual environment using <code>ifcb_py_install</code>.</p>
<p>If an image belongs to a sample that already has a corresponding manual <code>.mat</code> file,
the function updates the class IDs for the specified regions of interest (ROIs) in that file.
If no manual file exists for the sample, the function creates a new one based on the sample's ADC data,
assigning unclassified IDs to all ROIs initially, then applying the specified class to the relevant ROIs.</p>
<p>The class parameter can be provided as either a string (class name) or an integer (class index).
If a string is provided, the function will attempt to match it to one of the available
classes in <code>class2use_file</code>. If no match is found, an error is thrown.</p>
<p>The function assumes that the ADC files are organized in subfolders by year (YYYY) and date (DYYYYMMDD) within <code>adc_folder</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Sosik, H. M. and Olson, R. J. (2007), Automated taxonomic classification of phytoplankton sampled with imaging-in-flow cytometry. Limnol. Oceanogr: Methods 5, 204–216.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ifcb_correct_annotation.html">ifcb_correct_annotation</a></code>, <code><a href="ifcb_create_empty_manual_file.html">ifcb_create_empty_manual_file</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Initialize a python session if not already set up</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ifcb_py_install.html">ifcb_py_install</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Annotate two png images with class "Nodularia_spumigena" and update or create manual files</span></span></span>
<span class="r-in"><span><span class="fu">ifcb_annotate_batch</span><span class="op">(</span></span></span>
<span class="r-in"><span>  png_images <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"D20230812T162908_IFCB134_01399.png"</span>,</span></span>
<span class="r-in"><span>                 <span class="st">"D20230714T102127_IFCB134_00069.png"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  class <span class="op">=</span> <span class="st">"Nodularia_spumigena"</span>,</span></span>
<span class="r-in"><span>  manual_folder <span class="op">=</span> <span class="st">"path/to/manual"</span>,</span></span>
<span class="r-in"><span>  adc_folder <span class="op">=</span> <span class="st">"path/to/adc"</span>,</span></span>
<span class="r-in"><span>  class2use_file <span class="op">=</span> <span class="st">"path/to/class2use.mat"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anders Torstensson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

