<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot and Save IFCB PSD Data — ifcb_psd • iRfcb</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot and Save IFCB PSD Data — ifcb_psd"><meta name="description" content="This function generates and saves data about a dataset's Particle Size Distribution (PSD) from Imaging FlowCytobot (IFCB)
feature and hdr files, which can be used for data quality assurance and quality control."><meta property="og:description" content="This function generates and saves data about a dataset's Particle Size Distribution (PSD) from Imaging FlowCytobot (IFCB)
feature and hdr files, which can be used for data quality assurance and quality control."><meta property="og:image" content="https://europeanifcbgroup.github.io/iRfcb/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iRfcb</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.10</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/tutorial.html">Tutorial</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot and Save IFCB PSD Data</h1>

      <div class="d-none name"><code>ifcb_psd.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generates and saves data about a dataset's Particle Size Distribution (PSD) from Imaging FlowCytobot (IFCB)
feature and hdr files, which can be used for data quality assurance and quality control.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ifcb_psd</span><span class="op">(</span></span>
<span>  <span class="va">feature_folder</span>,</span>
<span>  <span class="va">hdr_folder</span>,</span>
<span>  save_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  output_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot_folder <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_marker <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  start_fit <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  r_sqr <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  beads <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bubbles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  incomplete <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  missing_cells <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  biomass <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bloom <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  humidity <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  micron_factor <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3.4</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-feature-folder">feature_folder<a class="anchor" aria-label="anchor" href="#arg-feature-folder"></a></dt>
<dd><p>The absolute path to a directory containing all of the v2 feature files for the dataset.</p></dd>


<dt id="arg-hdr-folder">hdr_folder<a class="anchor" aria-label="anchor" href="#arg-hdr-folder"></a></dt>
<dd><p>The absolute path to a directory containing all of the hdr files for the dataset.</p></dd>


<dt id="arg-save-data">save_data<a class="anchor" aria-label="anchor" href="#arg-save-data"></a></dt>
<dd><p>A boolean indicating whether to save data to CSV files. Default is FALSE.</p></dd>


<dt id="arg-output-file">output_file<a class="anchor" aria-label="anchor" href="#arg-output-file"></a></dt>
<dd><p>A string with the base file name for the .csv to use (including path). Set to NULL to not save data (default).</p></dd>


<dt id="arg-plot-folder">plot_folder<a class="anchor" aria-label="anchor" href="#arg-plot-folder"></a></dt>
<dd><p>The folder where graph images for each file will be saved. Set to NULL to not save graphs (default).</p></dd>


<dt id="arg-use-marker">use_marker<a class="anchor" aria-label="anchor" href="#arg-use-marker"></a></dt>
<dd><p>A boolean indicating whether to show markers on the plot. Default is FALSE.</p></dd>


<dt id="arg-start-fit">start_fit<a class="anchor" aria-label="anchor" href="#arg-start-fit"></a></dt>
<dd><p>An integer indicating the start fit value for the plot. Default is 10.</p></dd>


<dt id="arg-r-sqr">r_sqr<a class="anchor" aria-label="anchor" href="#arg-r-sqr"></a></dt>
<dd><p>The lower limit of acceptable R^2 values (any curves below it will be flagged). Default is 0.5.</p></dd>


<dt id="arg-beads">beads<a class="anchor" aria-label="anchor" href="#arg-beads"></a></dt>
<dd><p>The maximum multiplier for the curve fit. Any files with higher curve fit multipliers will be flagged as bead runs. If this argument is included, files with "runBeads" marked as TRUE in the header file will also be flagged as a bead run. Optional.</p></dd>


<dt id="arg-bubbles">bubbles<a class="anchor" aria-label="anchor" href="#arg-bubbles"></a></dt>
<dd><p>The minimum difference between the starting ESD and the ESD with the most targets.  Any files with a difference higher than this threshold will be flagged as mostly bubbles. Optional.</p></dd>


<dt id="arg-incomplete">incomplete<a class="anchor" aria-label="anchor" href="#arg-incomplete"></a></dt>
<dd><p>A tuple with the minimum volume of cells (in c/L) and the minimum mL analyzed for a complete run. Any files with values below these thresholds will be flagged as incomplete. Optional.</p></dd>


<dt id="arg-missing-cells">missing_cells<a class="anchor" aria-label="anchor" href="#arg-missing-cells"></a></dt>
<dd><p>The minimum image count to trigger count ratio. Any files with lower ratios will be flagged as missing cells. Optional.</p></dd>


<dt id="arg-biomass">biomass<a class="anchor" aria-label="anchor" href="#arg-biomass"></a></dt>
<dd><p>The minimum number of targets in the most populated ESD bin for any given run. Any files with fewer targets will be flagged as having low biomass. Optional.</p></dd>


<dt id="arg-bloom">bloom<a class="anchor" aria-label="anchor" href="#arg-bloom"></a></dt>
<dd><p>The minimum difference between the starting ESD and the ESD with the most targets. Any files with a difference less than this threshold will be flagged as a bloom. Will likely be lower than the bubbles threshold. Optional.</p></dd>


<dt id="arg-humidity">humidity<a class="anchor" aria-label="anchor" href="#arg-humidity"></a></dt>
<dd><p>The maximum percent humidity. Any files with higher values will be flagged as high humidity. Optional.</p></dd>


<dt id="arg-micron-factor">micron_factor<a class="anchor" aria-label="anchor" href="#arg-micron-factor"></a></dt>
<dd><p>The conversion factor to microns. Default is 1/3.4.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with data, fits, and flags DataFrames if <code>save_data</code> is FALSE; otherwise, NULL.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The PSD function originates from the <code>PSD</code> python repository (Hayashi et al. in prep), which can be found at <a href="https://github.com/kudelalab/PSD" class="external-link">https://github.com/kudelalab/PSD</a>.
This function requires a python interpreter to be installed. The required python packages can be installed in a virtual environment using <code>ifcb_py_install</code>.
The function requires v2 features generated by the <code>ifcb-analysis</code> MATLAB package (Sosik and Olson 2007) found at <a href="https://github.com/hsosik/ifcb-analysis" class="external-link">https://github.com/hsosik/ifcb-analysis</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Hayashi, K., Walton, J., Lie, A., Smith, J. and Kudela M. Using particle size distribution (PSD) to automate imaging flow cytobot (IFCB) data quality in coastal California, USA. In prep.</p>
<p>Sosik, H. M. and Olson, R. J. (2007), Automated taxonomic classification of phytoplankton sampled with imaging-in-flow cytometry. Limnol. Oceanogr: Methods 5, 204–216.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ifcb_py_install.html">ifcb_py_install</a></code> <a href="https://github.com/kudelalab/PSD" class="external-link">https://github.com/kudelalab/PSD</a> <a href="https://github.com/hsosik/ifcb-analysis" class="external-link">https://github.com/hsosik/ifcb-analysis</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">ifcb_psd</span><span class="op">(</span></span></span>
<span class="r-in"><span>  feature_folder <span class="op">=</span> <span class="st">'path/to/features'</span>,</span></span>
<span class="r-in"><span>  hdr_folder <span class="op">=</span> <span class="st">'path/to/hdr_data'</span>,</span></span>
<span class="r-in"><span>  save_data <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  output_file <span class="op">=</span> <span class="st">'psd/svea_2021'</span>,</span></span>
<span class="r-in"><span>  plot_folder <span class="op">=</span> <span class="st">'psd/plots'</span>,</span></span>
<span class="r-in"><span>  use_marker <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  start_fit <span class="op">=</span> <span class="fl">13</span>,</span></span>
<span class="r-in"><span>  r_sqr <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  beads <span class="op">=</span> <span class="fl">10</span> <span class="op">**</span> <span class="fl">9</span>,</span></span>
<span class="r-in"><span>  bubbles <span class="op">=</span> <span class="fl">150</span>,</span></span>
<span class="r-in"><span>  incomplete <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1500</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  missing_cells <span class="op">=</span> <span class="fl">0.7</span>,</span></span>
<span class="r-in"><span>  biomass <span class="op">=</span> <span class="fl">1000</span>,</span></span>
<span class="r-in"><span>  bloom <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  humidity <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  micron_factor <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">3.0</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anders Torstensson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

